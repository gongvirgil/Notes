# ER图

我们通常用实体、联系和属性这三个概念来理解现实问题，因此ER模型比较接近人的思维方式。此外，ER模型用简单的图形符号表达系统分析员对问题域的理解，不熟悉计算机技术的用户也能理解它，因此，ER模型可以作为用户与分析员之间有效的交流工具。


ER模型中包含3种相互关联的信息：数据对象（实体）、数据对象的属性及数据对象彼此之间相互连接的关系。

实体是长方形体现，而属性则是椭圆形，关系为菱形。

### 1.数据对象（实体）

数据对象是对软件必须理解的复合信息的抽象。所谓符合信息是指具有一系列不同性质或属性的事物，仅有单个值得事物（例如，宽度）不是数据对象。数据对象可以是外部实体（例如，产生或使用信息的任何事物）、事物（例如，报表）、行为（例如，打电话）、事件（例如，响警报）、角色（例如，教师、学生）、单位（例如，会计科）、地点（例如，仓库）或结构（例如文件）等。总之，可以由一组属性来定义的实体都可以被认为是数据对象。
数据对象彼此间是有关联的，例如，教师“教”课程，学生“学”课程。教或学的关系表示教师和课程或课程之间的一种特定的连接。
数据对象只封装了数据而没有对施加于数据上的操作的引用，这是数据对象与面向对象范型中的“类”或“对象”的显著区别。

ER的实体还会细分为弱实体和复合实体：

* 弱实体：一个实体必须依赖于另一个实体存在，那么前者是弱实体，后者是强实体，弱实体必须依赖强实体存在，例如上图的学生实体和成绩单实体，成绩单依赖于学生实体而存在，因此学生是强实体，而成绩单是弱实体。
    * 弱实体和强实体的联系必然只有1：N或者1：1，这是由于弱实体完全依赖于强实体，强实体不存在，那么弱实体就不存在，所以弱实体是完全参与联系的，因此弱实体与联系之间的联系也是用的双线菱形。
* 复合实体：复合实体也称联合实体或桥接实体，常常用于实现两个或多个实体间的M：N联系，它由每个关联实体的主玛组成，用长方体内加一个菱形来表示。

### 2.属性

属性定义了数据对象的性质。必须把一个或多个属性定义为“标识符”，也就是说，当人们希望找到数据对象的一个实例时，用标识属性作为“关键字”（通常简称为“键”）。
应该根据对所要解决的问题的理解，来确定特定数据对象的一组合适的属性。例如，为了开发机动车管理系统，描述汽车的属性应该是生产厂、品牌、型号、发动机号码、车体类型、颜色、车主姓名、住址、驾驶证号码、生产日期及购买日期等。但是，为了开发设计汽车的CAD系统，用上述这些属性描述汽车就不合适了，其中车主姓名、住址、驾驶证号码、生产日期和购买日期等属性应该删去，而描述汽车技术指标的大量属性应该添加进来。

ER图的属性还细分为复合属性、多值属性和派生属性、可选属性，同时还有用来表示联系的属性，称为联系属性。

* 复合属性(composite attribute)：复合属性是指具有多个属性的组合，例如名字属性，它可以包含姓氏属性和名字属性。
    * 复合属性也有唯一属性，例如学生的所在班级属性，由于多个年级都有班级，所以单单班级属性是不唯一的，但是和年级组成的复合属性后则可以匹配成唯一属性。
* 多值属性（multivalued attribute）：一个实体的某个属性可以有多个不同的取值，例如一本书的分类属性，这本书有多个分类，例如科学、医学等，这个分类就是多值属性，用双线椭圆表示。
* 派生属性(derivers attribute)：是非永久性存于数据库的属性。派生属性的值可以从别的属性值或其他数据（如当前日期）派生出来，用虚线椭圆表示。
* 可选属性(optional attribute)：并不是所有的属性都必须有值，有些属性的可以没有值，这就是可选属性，在椭圆的文字后用（O）来表示，如下图的地址就是一个可选属性。
* 联系属性：联系属于用户表示多个实体之间联系所具有的属性，一般来讲M:N的两个实体的联系具有联系属性，在1:1和1：M的实体联系中联系属性并不必要。

### 3.联系

客观世界中的事物彼此间往往是有联系的。例如，教师与课程渐存在“教”这种联系，而学生与课程间则存在“学”这种联系。
数据对象彼此之间相互连接的方式称为联系，也称为关系。联系可分为以下3种类型。
•一对一联系（1:1）
    例如，一个部门有一个经理，而每个经理只在一个部门任职，则部门与经理的联系是一对一的。
•一对多联系（1:N）
   例如，某校教师与课程之间存在一对多的联系“教”，即每位教师可以教多门课程，但是每门课程只能由一位教师来教。
•多对多联系（M:N）
    例如，学生与课程间的联系（“学”）是多对多的，即一个学生可以学多门课程，而每门课程可以有多个学生来学。

联系也可能有属性。例如，学生“学”某门课程所取得的成绩，既不是学生的属性也不是课程的属性。由于“成绩”既依赖于某名特定的学生又依赖于某门特定的课程，所以它是学生与课程之间的联系“学”的属性。


